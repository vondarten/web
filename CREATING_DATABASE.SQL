/*CREATING DATABASE*/
CREATE DATABASE IF NOT EXISTS LOJAENTREGAS ;
USE LOJAENTREGAS;

/*CREATING TABLES*/
CREATE TABLE IF NOT EXISTS ENDERECO (
	ID_ENDERECO INT(10) NOT NULL UNIQUE AUTO_INCREMENT,
    CEP VARCHAR(10) NOT NULL,
    NUMERO VARCHAR(4) NOT NULL,
    LOGRADOURO VARCHAR(25) NOT NULL,
    BAIRRO VARCHAR(25) NOT NULL,
    COMPLEMENTO VARCHAR(50) NOT NULL,
    CIDADE VARCHAR(20) NOT NULL,
    UF VARCHAR(20) NOT NULL,
    PRIMARY KEY (ID_ENDERECO)
);

CREATE TABLE IF NOT EXISTS TRANSPORTADORA(
	ID_TRANSPORTADORA INT(10) NOT NULL UNIQUE AUTO_INCREMENT,
    RAZAO_SOCIAL VARCHAR(50) NOT NULL,
    CNPJ VARCHAR(18) NOT NULL,
  	ID_ENDERECO INT(10) NOT NULL,
    PRIMARY KEY (ID_TRANSPORTADORA),
    FOREIGN KEY (ID_ENDERECO) REFERENCES ENDERECO(ID_ENDERECO)
);

CREATE TABLE IF NOT EXISTS ENTREGADOR(
	ID_ENTREGADOR INT(10) NOT NULL UNIQUE AUTO_INCREMENT,
    NOME VARCHAR(50) NOT NULL,
    IDADE INT(10) NOT NULL,
    CPF VARCHAR(14) NOT NULL,
    CAT_CNH VARCHAR(1) NOT NULL,
    TEM_CAT_A BOOLEAN NOT NULL,
    ID_TRANSPORTADORA INT(10) NOT NULL,
    ID_ENDERECO INT(10) NOT NULL,
    PRIMARY KEY (ID_ENTREGADOR),
    FOREIGN KEY (ID_TRANSPORTADORA) REFERENCES TRANSPORTADORA(ID_TRANSPORTADORA),
    FOREIGN KEY (ID_ENDERECO) REFERENCES ENDERECO(ID_ENDERECO)

);

CREATE TABLE IF NOT EXISTS LOJA(
	ID_LOJA INT(10) NOT NULL UNIQUE AUTO_INCREMENT,
    RAZAO_SOCIAL VARCHAR(50) NOT NULL,
    CNPJ VARCHAR(18) NOT NULL,
    ID_ENDERECO INT(10) NOT NULL,
    PRIMARY KEY (ID_LOJA),
    FOREIGN KEY (ID_ENDERECO) REFERENCES ENDERECO(ID_ENDERECO)
);

CREATE TABLE IF NOT EXISTS DESTINATARIO(
	ID_DESTINATARIO INT(10) NOT NULL UNIQUE AUTO_INCREMENT,
    CPF_CNPJ VARCHAR(18) NOT NULL,
    NOME VARCHAR(50) NOT NULL,
    ID_ENDERECO INT(10) NOT NULL,
    PRIMARY KEY (ID_DESTINATARIO),
    FOREIGN KEY (ID_ENDERECO) REFERENCES ENDERECO(ID_ENDERECO)
);

CREATE TABLE IF NOT EXISTS STATUS(
	ID_STATUS INT(10) NOT NULL UNIQUE AUTO_INCREMENT,
    NOME VARCHAR(25) NOT NULL,
    PRIMARY KEY(ID_STATUS)
);

CREATE TABLE IF NOT EXISTS ENCOMENDA(
	ID_ENCOMENDA INT(10) NOT NULL UNIQUE AUTO_INCREMENT,
    PESO DECIMAL(8,2) NOT NULL,
    ALTURA DECIMAL(5,2) NOT NULL,
    LARGURA DECIMAL(5,2) NOT NULL,
    PROFUNDIDADE DECIMAL(5,2) NOT NULL,
    DATA_PREVISTA DATE NOT NULL,
    OBSERVACAO VARCHAR(50) NOT NULL,
    ID_ENTREGADOR INT(10) NOT NULL,
    ID_LOJA INT(10) NOT NULL,
    ID_DESTINATARIO INT(10) NOT NULL,
    ID_STATUS INT(10) NOT NULL,
    PRIMARY KEY (ID_ENCOMENDA),
    FOREIGN KEY (ID_ENTREGADOR) REFERENCES ENTREGADOR(ID_ENTREGADOR),
    FOREIGN KEY (ID_LOJA) REFERENCES LOJA(ID_LOJA),
    FOREIGN KEY (ID_DESTINATARIO) REFERENCES DESTINATARIO(ID_DESTINATARIO),
    FOREIGN KEY (ID_STATUS) REFERENCES STATUS(ID_STATUS)
);


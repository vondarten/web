/*CREATING DATABASE*/
CREATE DATABASE IF NOT EXISTS LOJAENTREGAS ;
USE LOJAENTREGAS;

/*CREATING TABLES*/
CREATE TABLE IF NOT EXISTS ENDERECO (
	ID_ENDERECO INT(10) NOT NULL UNIQUE,
    CEP VARCHAR(10),
    NUMERO VARCHAR(4),
    LOGRADOURO VARCHAR(25),
    BAIRRO VARCHAR(25),
    COMPLEMENTO VARCHAR(50),
    CIDADE VARCHAR(20),
    UF VARCHAR(20),
    PRIMARY KEY (ID_ENDERECO)
);

CREATE TABLE IF NOT EXISTS TRANSPORTADORA(
	ID_TRANSPORTADORA INT(10) NOT NULL UNIQUE,
    RAZAO_SOCIAL VARCHAR(50),
    CNPJ VARCHAR(18),
  	ID_ENDERECO INT(10),
    PRIMARY KEY (ID_TRANSPORTADORA),
    FOREIGN KEY (ID_ENDERECO) REFERENCES ENDERECO(ID_ENDERECO)
);

CREATE TABLE IF NOT EXISTS ENTREGADOR(
	ID_ENTREGADOR INT(10) NOT NULL UNIQUE,
    NOME VARCHAR(50),
    IDADE INT(10),
    CPF VARCHAR(14),
    CAT_CNH VARCHAR(1),
    TEM_CAT_A BOOLEAN,
    ID_TRANSPORTADORA INT(10),
    ID_ENDERECO INT(10),
    PRIMARY KEY (ID_ENTREGADOR),
    FOREIGN KEY (ID_TRANSPORTADORA) REFERENCES TRANSPORTADORA(ID_TRANSPORTADORA),
    FOREIGN KEY (ID_ENDERECO) REFERENCES ENDERECO(ID_ENDERECO)

);

CREATE TABLE IF NOT EXISTS LOJA(
	ID_LOJA INT(10) NOT NULL UNIQUE,
    RAZAO_SOCIAL VARCHAR(50),
    CNPJ VARCHAR(18),
    ID_ENDERECO INT(10),
    PRIMARY KEY (ID_LOJA),
    FOREIGN KEY (ID_ENDERECO) REFERENCES ENDERECO(ID_ENDERECO)
);

CREATE TABLE IF NOT EXISTS DESTINATARIO(
	ID_DESTINATARIO INT(10) NOT NULL UNIQUE,
    CPF_CNPJ VARCHAR(18),
    NOME VARCHAR(50),
    ID_ENDERECO INT(10),
    PRIMARY KEY (ID_DESTINATARIO),
    FOREIGN KEY (ID_ENDERECO) REFERENCES ENDERECO(ID_ENDERECO)
);

CREATE TABLE IF NOT EXISTS STATUS(
	ID_STATUS INT(10) NOT NULL UNIQUE,
    NOME VARCHAR(25),
    PRIMARY KEY(ID_STATUS)
);

CREATE TABLE IF NOT EXISTS ENCOMENDA(
	ID_ENCOMENDA INT(10) NOT NULL UNIQUE,
    PESO DECIMAL(8,2),
    ALTURA DECIMAL(5,2),
    LARGURA DECIMAL(5,2),
    PROFUNDIDADE DECIMAL(5,2),
    DATA_PREVISTA DATE,
    OBSERVACAO VARCHAR(50),
    ID_ENTREGADOR INT(10),
    ID_LOJA INT(10),
    ID_DESTINATARIO INT(10),
    ID_STATUS INT(10),
    PRIMARY KEY (ID_ENCOMENDA),
    FOREIGN KEY (ID_ENTREGADOR) REFERENCES ENTREGADOR(ID_ENTREGADOR),
    FOREIGN KEY (ID_LOJA) REFERENCES LOJA(ID_LOJA),
    FOREIGN KEY (ID_DESTINATARIO) REFERENCES DESTINATARIO(ID_DESTINATARIO),
    FOREIGN KEY (ID_STATUS) REFERENCES STATUS(ID_STATUS)
);

